# Polidium プロジェクト TODO リスト

## 🚨 重要度：高（バグ修正・セキュリティ）

### バグ修正

- [ ] **IPC イベントリスナーのメモリリーク修正**

  - `src/renderer/ipc.ts:16-19` - `removeListener`メソッドの適切な実装
  - `src/renderer/Player/VideoPlayer.vue:70` - イベントリスナーの正しいクリーンアップ

- [ ] **未使用コードの削除**

  - `src/main/index.ts:61-102` - `get-file-path`ハンドラーが使用されていない
  - 使用されていない IMPORT やコメントアウトされたコードの整理

- [ ] **型安全性の向上**
  - `any`型の使用を減らし、適切な型定義を追加
  - `src/renderer/store/modules/video.ts:57` - `sortQueue`の型安全な実装

### セキュリティ対策

- [ ] **ファイルパス検証の強化**

  - パストラバーサル攻撃対策の実装
  - ファイル拡張子の厳密な検証

- [ ] **Web 表示時のセキュリティ強化**
  - CSP（Content Security Policy）の設定
  - XSS 攻撃対策の実装

## 🔧 重要度：中（機能改善・UX 向上）

### エラーハンドリング強化

- [ ] **包括的なエラーハンドリング**

  - ファイル読み込み失敗時の適切なエラー表示
  - ネットワークエラー時の再試行機能
  - ユーザーフレンドリーなエラーメッセージの実装

- [ ] **ローディング状態の表示**
  - ファイル読み込み中のローディングアニメーション
  - Web 表示時の読み込み状態表示

### 機能拡張

- [ ] **キーボードショートカット**

  - 再生/一時停止（スペースキー）
  - 音量調整（↑↓ キー）
  - シーク機能（←→ キー）

- [ ] **プレイリスト機能の向上**
  - ファイルの並び替え UI 改善
  - プレイリストの保存・読み込み機能
  - リピート・シャッフル機能

### UI/UX 改善

- [ ] **レスポンシブデザイン**

  - コントローラー UI の改善

- [ ] **設定画面の拡張**
  - より詳細な設定オプション

## 🏗️ 重要度：中（リファクタリング・保守性）

### コード構造の改善

- [ ] **IPC ハンドラーの分離**

  - `src/main/index.ts`の巨大な関数を小さな関数に分割
  - IPC イベントハンドラーを別ファイルに分離

- [ ] **共通ユーティリティの作成**

  - ファイルパス処理の共通化
  - 型定義の整理・統合

- [ ] **Store の最適化**
  - 状態管理ロジックの整理
  - 不要な`reactive`・`ref`の削除

### コンポーネント設計の改善

- [ ] **コンポーネントの責任分離**

  - 大きなコンポーネントの分割
  - 再利用可能なコンポーネントの抽出

- [ ] **Props・Emits の型定義強化**
  - 全コンポーネントでの型安全性確保

## 📚 重要度：低（将来的な改善）

### テスト実装

- [ ] **ユニットテスト**
  - Store のテスト実装
  - ユーティリティ関数のテスト

### パフォーマンス最適化

- [ ] **メモリ使用量の最適化**

  - WebContentsView の効率的な管理
  - 大容量ファイル処理の最適化

- [ ] **起動時間の短縮**
  - 必要に応じた遅延読み込みの実装

## 🔄 継続的な保守

- [x] **依存関係の定期更新**

  - セキュリティパッチの適用

- [ ] **ドキュメント整備**
  - README.md の充実
  - API 仕様書の作成
  - 開発者向けガイドの作成

---

## 実装の優先順位

1. **第 1 フェーズ（緊急）**: バグ修正とセキュリティ対策
2. **第 2 フェーズ（短期）**: エラーハンドリング強化と UI 改善
3. **第 3 フェーズ（中期）**: リファクタリングと機能拡張
4. **第 4 フェーズ（長期）**: テスト実装と新機能検討

この TODO リストに沿って段階的に改善を進めることで、より安定性と保守性の高いアプリケーションに発展させることができます。まずは重要度の高いバグ修正とセキュリティ対策から着手することをお勧めします。
